{"ast":null,"code":"import _toConsumableArray from\"C:/Users/eriks/OneDrive/Dokument/GitHub/ReceptBook/recipebook/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/eriks/OneDrive/Dokument/GitHub/ReceptBook/recipebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{Button,Container}from\"react-bootstrap\";import RecipeCard from\"./RecipeCard\";import NavigationBar from\"./NavigationBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RecipeList=function RecipeList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useParams=useParams(),query=_useParams.query;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentIndex=_useState6[0],setCurrentIndex=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isExpanded=_useState8[0],setIsExpanded=_useState8[1];var appId=process.env.REACT_APP_EDAMAM_APP_ID;var appKey=process.env.REACT_APP_EDAMAM_APP_KEY;var fetchRecipes=function fetchRecipes(){axios.get(\"https://api.edamam.com/search?q=\".concat(query,\"&app_id=\").concat(appId,\"&app_key=\").concat(appKey,\"&from=\").concat(page,\"&to=\").concat(page+10)).then(function(response){setRecipes(function(prevRecipes){return[].concat(_toConsumableArray(prevRecipes),_toConsumableArray(response.data.hits));});setPage(function(prevPage){return prevPage+10;});console.log(response.data.hits);}).catch(function(error){return console.error(\"Error:\",error);});};useEffect(function(){setPage(0);setRecipes([]);fetchRecipes();},[query]);var handleNext=function handleNext(){if(currentIndex<recipes.length-1){setCurrentIndex(currentIndex+1);}else{fetchRecipes();}setIsExpanded(false);};var handlePrev=function handlePrev(){if(currentIndex>0){setCurrentIndex(currentIndex-1);}setIsExpanded(false);};var recipe=recipes[currentIndex];if(!recipe)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavigationBar,{}),/*#__PURE__*/_jsxs(Container,{className:\"d-flex justify-content-center align-items-center\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"sticky\",top:\"10px\",left:\"0\"},children:/*#__PURE__*/_jsx(Button,{style:{width:\"150px\"},className:\"btn btn-primary btn-lg\",onClick:handlePrev,disabled:currentIndex===0,children:\"Previous\"})}),/*#__PURE__*/_jsx(RecipeCard,{recipe:recipe.recipe,isExpanded:isExpanded,setIsExpanded:setIsExpanded,isSavedPage:false}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"sticky\",top:\"10px\",right:\"0\"},children:/*#__PURE__*/_jsx(Button,{style:{width:\"150px\"},className:\"btn btn-primary btn-lg\",onClick:handleNext,disabled:currentIndex===recipes.length-1&&recipes.length%10!==0,children:currentIndex===recipes.length-1?\"Load more\":\"Next\"})})]})]});};export default RecipeList;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","Button","Container","RecipeCard","NavigationBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecipeList","_useState","_useState2","_slicedToArray","recipes","setRecipes","_useParams","query","_useState3","_useState4","page","setPage","_useState5","_useState6","currentIndex","setCurrentIndex","_useState7","_useState8","isExpanded","setIsExpanded","appId","process","env","REACT_APP_EDAMAM_APP_ID","appKey","REACT_APP_EDAMAM_APP_KEY","fetchRecipes","get","concat","then","response","prevRecipes","_toConsumableArray","data","hits","prevPage","console","log","catch","error","handleNext","length","handlePrev","recipe","children","className","style","position","top","left","width","onClick","disabled","isSavedPage","right"],"sources":["C:/Users/eriks/OneDrive/Dokument/GitHub/ReceptBook/recipebook/src/components/RecipeList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Button, Container } from \"react-bootstrap\";\r\nimport RecipeCard from \"./RecipeCard\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\nconst RecipeList = () => {\r\n\tconst [recipes, setRecipes] = useState([]);\r\n\tconst { query } = useParams();\r\n\tconst [page, setPage] = useState(0);\r\n\tconst [currentIndex, setCurrentIndex] = useState(0);\r\n\tconst [isExpanded, setIsExpanded] = useState(false);\r\n\r\n\tconst appId = process.env.REACT_APP_EDAMAM_APP_ID;\r\n\tconst appKey = process.env.REACT_APP_EDAMAM_APP_KEY;\r\n\r\n\tconst fetchRecipes = () => {\r\n\t\taxios\r\n\t\t\t.get(\r\n\t\t\t\t`https://api.edamam.com/search?q=${query}&app_id=${appId}&app_key=${appKey}&from=${page}&to=${\r\n\t\t\t\t\tpage + 10\r\n\t\t\t\t}`\r\n\t\t\t)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tsetRecipes((prevRecipes) => [...prevRecipes, ...response.data.hits]);\r\n\t\t\t\tsetPage((prevPage) => prevPage + 10);\r\n\t\t\t\tconsole.log(response.data.hits);\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.error(\"Error:\", error));\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPage(0);\r\n\t\tsetRecipes([]);\r\n\t\tfetchRecipes();\r\n\t}, [query]);\r\n\r\n\tconst handleNext = () => {\r\n\t\tif (currentIndex < recipes.length - 1) {\r\n\t\t\tsetCurrentIndex(currentIndex + 1);\r\n\t\t} else {\r\n\t\t\tfetchRecipes();\r\n\t\t}\r\n\t\tsetIsExpanded(false);\r\n\t};\r\n\r\n\tconst handlePrev = () => {\r\n\t\tif (currentIndex > 0) {\r\n\t\t\tsetCurrentIndex(currentIndex - 1);\r\n\t\t}\r\n\t\tsetIsExpanded(false);\r\n\t};\r\n\r\n\tconst recipe = recipes[currentIndex];\r\n\r\n\tif (!recipe) return <p>Loading...</p>;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<NavigationBar />\r\n\t\t\t<Container\r\n\t\t\t\tclassName='d-flex justify-content-center align-items-center'\r\n\t\t\t\tstyle={{ position: \"relative\" }}>\r\n\t\t\t\t<div style={{ position: \"sticky\", top: \"10px\", left: \"0\" }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ width: \"150px\" }}\r\n\t\t\t\t\t\tclassName='btn btn-primary btn-lg'\r\n\t\t\t\t\t\tonClick={handlePrev}\r\n\t\t\t\t\t\tdisabled={currentIndex === 0}>\r\n\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<RecipeCard\r\n\t\t\t\t\trecipe={recipe.recipe}\r\n\t\t\t\t\tisExpanded={isExpanded}\r\n\t\t\t\t\tsetIsExpanded={setIsExpanded}\r\n\t\t\t\t\tisSavedPage={false}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div style={{ position: \"sticky\", top: \"10px\", right: \"0\" }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ width: \"150px\" }}\r\n\t\t\t\t\t\tclassName='btn btn-primary btn-lg'\r\n\t\t\t\t\t\tonClick={handleNext}\r\n\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\tcurrentIndex === recipes.length - 1 && recipes.length % 10 !== 0\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{currentIndex === recipes.length - 1 ? \"Load more\" : \"Next\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Container>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default RecipeList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}